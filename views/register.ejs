<%- include("partials/header") -%>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<section class="login">
	<div class="container-log">
		<!-- Dark mode toggle switch with custom sun and moon icons -->
		<div class="toggle-container">
			<label class="switch">
				<input type="checkbox" id="modeToggle">
				<span class="slider round">
					<img src="/image/light.png" class="sun slider-icon" alt="light mode" width="30" height="30"/>
					<img src="/image/dark.png" class="moon slider-icon" alt="light mode" width="30" height="30"/>
				</span>
			</label>
		</div>
		<img class="auth-bg w-half img-fluid" src="/image/signin.jpg" alt="login" />

		<div class="row mt-3 w-half">
			<h1 class="offset-5 mb-3 text-3xl font-bold pl-4">Signup</h1>
			<div class="col-7 offset-3">
				<% if (errorMessage) { %>
				<p style="color: red"><%= errorMessage %></p>
				<% } %>
				<form method="post" action="/user/register">
					<div class="mb-3">
						<label class="form-label" for="name">Name</label>
						<input
							type="text"
							class="form-control"
							id="name"
							placeholder="User"
							name="name"
							required
							pattern="[A-Za-z]+"
							title="Must container letters only.Numbers and Special characters not allowed"
						/>
					</div>
					<div class="mb-3 position-relative">
						<label class="form-label" for="email">Email ID</label>
						<input
							type="email"
							class="form-control"
							id="email"
							placeholder="abc1@site.com"
							name="email"
							required
						/>
					</div>
					<div class="mb-3 position-relative">
						<label class="form-label" for="password">Password</label>
						<input
							type="password"
							class="form-control"
							id="password"
							placeholder="••••••"
							name="password"
							required
							aria-describedby="passwordHelpBlock"
						/>
						<span class="password-toggle" id="passwordToggle">
							<i class="fas fa-eye-slash"></i>
						  </span>
						<div id="passwordHelpBlock" class="form-text">
							Your password must be 8-20 characters long.
						</div>
					</div>

					<button type="submit" class="btn btn-dark login-button mb-3 center">
						Create Account
					</button>
				</form>
				<hr />
				<div class="mx-auto p-2">Already have an account?
					<a href="/user/login"><b>Login</b></a>
				</div>
				<span class=" pt-4 pl-[120px]">Go to </span><a style="color: blue" href="/">Home</a>
			</div>
		</div>
	</div>
</section>

<%- include("partials/footer") -%>

<script>
	const passwordInput = document.getElementById('password');
	const passwordToggle = document.getElementById('passwordToggle');
  
	passwordToggle.addEventListener('click', function () {
	  const passwordField = this.querySelector('i');
	  const fieldType =
		passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
	  passwordInput.setAttribute('type', fieldType);
  
	  if (fieldType === 'password') {
		passwordField.classList.replace('fa-eye', 'fa-eye-slash');
	  } else {
		passwordField.classList.replace('fa-eye-slash', 'fa-eye');
	  }
	});
  </script>